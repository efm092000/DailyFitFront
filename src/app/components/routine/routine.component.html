<div class="page d-flex flex-column align-items-center" *ngIf="!displaySearchExercises">
  <input *ngIf="isEditMode" name="routine-name"
         placeholder="Routine Name" [(ngModel)] = "userRoutine.name" value="{{userRoutine.name}}">
  <p *ngIf="!isEditMode" class="title">{{userRoutine.name}}</p>
  <table id="table" class="">
    <thead>
      <tr>
        <th class="text-align-center ">Exercises</th>
        <th class="text-align-center ">Sets</th>
        <th class="text-align-center ">Repetitions</th>
        <td class="delete-exercise-column mt-3" *ngIf="isEditMode"></td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let exercise of exercises">
        <td class="text-align-center p-3">{{exercise.exercise}}</td>
        <td class="text-align-center p-3">{{exercise.sets}}</td>
        <td class="text-align-center p-3">{{exercise.reps}}</td>
        <td class="delete-exercise-column p-3" *ngIf="isEditMode"><span class="delete-exercise-button p-3" (click)="deleteExerciseAction(exercise)">X</span></td>
      </tr>
      <tr class="add-exercise-button" *ngIf="isEditMode">
        <td colspan="3" (click)="toggleSearch()" *ngIf="isEditMode">Add Exercise</td>
        <td class="delete-exercise-column " *ngIf="isEditMode" (click)="addExerciseAction()"></td>
      </tr>
    </tbody>
  </table>
  <div id="edit-buttons" class="p-3 d-flex align-items-center justify-content-between">
    <button class="routine-buttons button-small mx-auto" (click)="saveRoutineAction()" *ngIf="isEditMode">Save Routine</button>
    <button class="routine-buttons button-small mx-auto" (click)="editRoutineAction()" *ngIf="!isEditMode">Edit Routine</button>
    <button class="routine-buttons button-small mx-auto" (click)="toggleDeleteConfirmation()" *ngIf="isEditMode">Delete Routine</button>
    <button class="routine-buttons button-small mx-auto" (click)="goBack()" routerLink="/routines">Go Back</button>
  </div>
</div>

<div class="delete-confirmation" *ngIf="showDeleteConfirmation">
  <p>Are you sure you want to delete this routine?</p>
  <button (click)="deleteRoutineAction()" routerLink="/routines">Confirm</button>
  <button (click)="toggleDeleteConfirmation()">Cancel</button>
</div>

<app-exercise-search *ngIf="displaySearchExercises" [rid] = userRoutine.rid></app-exercise-search>
<button (click)="toggleSearch()" *ngIf="displaySearchExercises">Finish</button>
